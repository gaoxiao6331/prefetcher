(()=>{"use strict";var e,t,a,r,n,s={970(e,t,a){var r=a(70),n=a(758),s=a(576);let l={formatNumber:e=>new Intl.NumberFormat("zh-CN").format(e),formatCurrency:e=>new Intl.NumberFormat("zh-CN",{style:"currency",currency:"CNY"}).format(e),async delay(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return new Promise(t=>setTimeout(t,e))},async mockFetch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{baseDelay:a=100}=t;await this.delay(a);let r=(e,t)=>Math.floor(Math.random()*(t-e+1))+e;switch(e){case"/api/stats":return{data:{users:r(1e4,6e4),orders:r(1e3,8e3),revenue:r(1e5,8e5)}};case"/api/chart":return{data:Array.from({length:12},()=>r(100,1e3))};case"/api/table":return{data:Array.from({length:10},(e,t)=>({id:t+1,name:`条目-${t+1}`,status:["进行中","已完成","待处理"][r(0,2)],amount:r(1e3,2e4)}))};case"/api/notifications":return{data:Array.from({length:5},()=>({time:new Date().toLocaleTimeString("zh-CN",{hour12:!1}),type:["INFO","WARN","ERROR"][r(0,2)],title:"系统消息",message:"这是一条模拟通知，用于性能测试。"}))};default:return{data:null}}}};function i(e){let{label:t,endpoint:a,duration:s=1200}=e,[i,o]=(0,n.useState)(null);return(0,n.useEffect)(()=>{let e=!0;return(async()=>{let r=(await l.mockFetch(a,{baseDelay:200})).data,n="number"==typeof r?r:(null==r?void 0:r[t])??0,i=performance.now(),c=t=>{let a=Math.min((t-i)/s,1),r=Math.floor(0+(n-0)*(1-Math.pow(1-a,4)));e&&o(r),a<1&&requestAnimationFrame(c)};requestAnimationFrame(c)})(),()=>{e=!1}},[a,t,s]),(0,r.jsxs)("div",{className:"stat-item",children:[(0,r.jsx)("span",{className:"stat-value",children:null===i?"--":l.formatNumber(i)}),(0,r.jsx)("span",{className:"stat-label",children:t})]})}function o(){let[e,t]=(0,n.useState)(null),[s,i]=(0,n.useState)(null),[o,c]=(0,n.useState)(null);return(0,n.useEffect)(()=>{let e=!0;return(async()=>{let[r,n,s]=await Promise.all([l.mockFetch("/api/chart",{baseDelay:300}),l.mockFetch("/api/table",{baseDelay:350}),l.mockFetch("/api/notifications",{baseDelay:250})]);e&&(t(r.data),i(n.data),c(s.data),r.data&&Array.isArray(r.data)&&a.e("791").then(a.bind(a,330)).then(e=>{e.initAnalytics(r.data)}).catch(()=>{}))})(),()=>{e=!1}},[]),(0,r.jsxs)("section",{className:"dashboard",children:[(0,r.jsxs)("div",{className:"card card-chart",children:[(0,r.jsx)("h3",{children:"\uD83D\uDCC8 数据图表"}),(0,r.jsx)("div",{className:"chart-placeholder",children:e?(0,r.jsxs)("div",{children:["Chart: ",e.join(", ")]}):(0,r.jsx)("div",{className:"loading-spinner"})})]}),(0,r.jsxs)("div",{className:"card card-table",children:[(0,r.jsx)("h3",{children:"\uD83D\uDCCB 数据列表"}),(0,r.jsx)("div",{className:"table-placeholder",children:s?(0,r.jsx)("ul",{children:s.map(e=>(0,r.jsx)("li",{children:`${e.name} - ${e.status} - ${l.formatCurrency(e.amount)}`},e.id))}):(0,r.jsx)("div",{className:"loading-spinner"})})]}),(0,r.jsxs)("div",{className:"card card-notifications",children:[(0,r.jsx)("h3",{children:"\uD83D\uDD14 通知中心"}),(0,r.jsx)("div",{className:"notifications-placeholder",children:o?(0,r.jsx)("ul",{children:o.map((e,t)=>(0,r.jsx)("li",{children:`${e.time} - [${e.type}] ${e.title}: ${e.message}`},t))}):(0,r.jsx)("div",{className:"loading-spinner"})})]})]})}function c(){let[e,t]=(0,n.useState)({ttfb:null,fcp:null,lcp:null,fid:null,cls:null,loadTime:null});(0,n.useEffect)(()=>{let e={ttfb:null,fcp:null,lcp:null,fid:null,cls:null,loadTime:null};function a(){let[a]=performance.getEntriesByType("navigation");a&&(e.ttfb=a.responseStart-a.requestStart,e.loadTime=a.loadEventEnd-a.fetchStart,t({...e}))}let r=new PerformanceObserver(a=>{let r=a.getEntries().find(e=>"first-contentful-paint"===e.name);r&&(e.fcp=r.startTime,t({...e}))});r.observe({entryTypes:["paint"]});let n=new PerformanceObserver(a=>{let r=a.getEntries();e.lcp=r[r.length-1].startTime,t({...e})});n.observe({entryTypes:["largest-contentful-paint"]});let s=new PerformanceObserver(a=>{let r=a.getEntries();r.length>0&&(e.fid=r[0].processingStart-r[0].startTime,t({...e}))});s.observe({entryTypes:["first-input"]});let l=0,i=new PerformanceObserver(a=>{for(let e of a.getEntries())e.hadRecentInput||(l+=e.value);e.cls=l,t({...e})});return i.observe({entryTypes:["layout-shift"]}),window.addEventListener("load",()=>{setTimeout(a,0)}),()=>{r.disconnect(),n.disconnect(),s.disconnect(),i.disconnect()}},[]);let a=["ttfb","fcp","lcp","fid","cls","loadTime"];return(0,r.jsxs)("section",{className:"performance-panel",children:[(0,r.jsx)("h2",{children:"⚡ 页面性能指标"}),(0,r.jsx)("div",{className:"perf-grid",children:["TTFB","FCP","LCP","FID","CLS","总加载时间"].map((t,n)=>{let s=a[n],l=e[s],i=null===l?"计算中...":"cls"===s?l.toFixed(3):`${l.toFixed(0)} ms`;return(0,r.jsxs)("div",{className:"perf-item",children:[(0,r.jsx)("span",{className:"perf-label",children:t}),(0,r.jsx)("span",{className:"perf-value",children:i})]},String(s))})}),(0,r.jsx)("button",{className:"save-btn",onClick:()=>{let t=sessionStorage.getItem("navigationMode")||"normal",a=JSON.parse(localStorage.getItem("performanceHistory")||"[]");a.unshift({timestamp:Date.now(),mode:t,...e}),a.length>20&&a.pop(),localStorage.setItem("performanceHistory",JSON.stringify(a)),alert("✅ 性能指标已保存！返回 Site A 查看对比数据")},children:"\uD83D\uDCBE 保存到 Site A"})]})}let d=document.getElementById("root");d&&(0,s.createRoot)(d).render((0,r.jsx)(function(){return(0,n.useEffect)(()=>{let e=window.setTimeout(()=>{a.e("624").then(a.bind(a,875)).then(e=>{e.logEnvironment(),e.supportsWebGL()&&console.debug("[nc] WebGL supported; fancy format demo:",e.fancyFormat("hello world from site b"))}).catch(()=>{})},1200);return()=>window.clearTimeout(e)},[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("nav",{className:"navbar",children:[(0,r.jsx)("div",{className:"nav-brand",children:"\uD83C\uDFAF Site B"}),(0,r.jsxs)("div",{className:"nav-links",children:[(0,r.jsx)("a",{href:"#dashboard",children:"Dashboard"}),(0,r.jsx)("a",{href:"#analytics",children:"Analytics"}),(0,r.jsx)("a",{href:"#settings",children:"Settings"})]}),(0,r.jsx)("a",{className:"back-btn",onClick:()=>history.back(),children:"← 返回 Site A"})]}),(0,r.jsxs)("main",{className:"main-content",children:[(0,r.jsxs)("section",{className:"hero",children:[(0,r.jsx)("h1",{children:"欢迎来到 Site B"}),(0,r.jsx)("p",{className:"hero-subtitle",children:"这是一个复杂的页面，包含多个 JS/CSS 文件和模拟的 API 请求"}),(0,r.jsxs)("div",{className:"hero-stats",children:[(0,r.jsx)(i,{label:"users",endpoint:"/api/stats",duration:1500}),(0,r.jsx)(i,{label:"orders",endpoint:"/api/stats",duration:1200}),(0,r.jsx)(i,{label:"revenue",endpoint:"/api/stats",duration:1500})]})]}),(0,r.jsx)(o,{}),(0,r.jsx)(c,{})]}),(0,r.jsx)("footer",{className:"footer",children:(0,r.jsx)("p",{children:"Site B - Prefetch 性能测试页面"})})]})},{}))}},l={};function i(e){var t=l[e];if(void 0!==t)return t.exports;var a=l[e]={exports:{}};return s[e](a,a.exports,i),a.exports}i.m=s,i.d=(e,t)=>{for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce((t,a)=>(i.f[a](e,t),t),[])),i.u=e=>"assets/js/async/js/"+e+".js",i.miniCssF=e=>""+e+".css",i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},i.l=function(t,a,r,n){if(e[t])return void e[t].push(a);if(void 0!==r)for(var s,l,o=document.getElementsByTagName("script"),c=0;c<o.length;c++){var d=o[c];if(d.getAttribute("src")==t||d.getAttribute("data-rspack")=="site-b:"+r){s=d;break}}s||(l=!0,(s=document.createElement("script")).timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.setAttribute("data-rspack","site-b:"+r),s.src=t),e[t]=[a];var u=function(a,r){s.onerror=s.onload=null,clearTimeout(m);var n=e[t];if(delete e[t],s.parentNode&&s.parentNode.removeChild(s),n&&n.forEach(function(e){return e(r)}),a)return a(r)},m=setTimeout(u.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=u.bind(null,s.onerror),s.onload=u.bind(null,s.onload),l&&document.head.appendChild(s)},t=[],i.O=(e,a,r,n)=>{if(a){n=n||0;for(var s=t.length;s>0&&t[s-1][2]>n;s--)t[s]=t[s-1];t[s]=[a,r,n];return}for(var l=1/0,s=0;s<t.length;s++){for(var[a,r,n]=t[s],o=!0,c=0;c<a.length;c++)(!1&n||l>=n)&&Object.keys(i.O).every(e=>i.O[e](a[c]))?a.splice(c--,1):(o=!1,n<l&&(l=n));if(o){t.splice(s--,1);var d=r();void 0!==d&&(e=d)}}return e},i.p="/",a={410:0},i.f.j=function(e,t){var r=i.o(a,e)?a[e]:void 0;if(0!==r)if(r)t.push(r[2]);else{var n=new Promise((t,n)=>r=a[e]=[t,n]);t.push(r[2]=n);var s=i.p+i.u(e),l=Error();i.l(s,function(t){if(i.o(a,e)&&(0!==(r=a[e])&&(a[e]=void 0),r)){var n=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+n+": "+s+")",l.name="ChunkLoadError",l.type=n,l.request=s,r[1](l)}},"chunk-"+e,e)}},i.O.j=e=>0===a[e],r=(e,t)=>{var r,n,[s,l,o]=t,c=0;if(s.some(e=>0!==a[e])){for(r in l)i.o(l,r)&&(i.m[r]=l[r]);if(o)var d=o(i)}for(e&&e(t);c<s.length;c++)n=s[c],i.o(a,n)&&a[n]&&a[n][0](),a[n]=0;return i.O(d)},(n=self.webpackChunksite_b=self.webpackChunksite_b||[]).forEach(r.bind(null,0)),n.push=r.bind(null,n.push.bind(n));var o=i.O(void 0,["783"],()=>i(970));o=i.O(o)})();