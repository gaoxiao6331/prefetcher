(()=>{"use strict";var e,t,a,n,r,s={970(e,t,a){var n=a(70),r=a(758),s=a(576);let i={formatNumber:e=>new Intl.NumberFormat("zh-CN").format(e),formatCurrency:e=>new Intl.NumberFormat("zh-CN",{style:"currency",currency:"CNY"}).format(e),randomInt:(e,t)=>Math.floor(Math.random()*(t-e+1))+e,async randomDelay(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:150,a=e+Math.random()*t;return new Promise(e=>setTimeout(e,a))},async mockFetch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{baseDelay:a=300,variance:n=150}=t;switch(await this.randomDelay(a,n),e){case"/api/stats":return{data:{users:this.randomInt(1e4,6e4),orders:this.randomInt(1e3,8e3),revenue:this.randomInt(1e5,8e5)}};case"/api/chart":return{data:Array.from({length:12},()=>this.randomInt(100,1e3))};case"/api/table":return{data:Array.from({length:10},(e,t)=>({id:t+1,name:`条目-${t+1}`,status:["进行中","已完成","待处理"][this.randomInt(0,2)],amount:this.randomInt(1e3,2e4)}))};case"/api/notifications":return{data:Array.from({length:5},()=>({time:new Date().toLocaleTimeString("zh-CN",{hour12:!1}),type:["INFO","WARN","ERROR"][this.randomInt(0,2)],title:"系统消息",message:"这是一条模拟通知，用于性能测试。"}))};default:return{data:null}}}};function l(e){let{label:t,endpoint:a,duration:s=1200}=e,[l,o]=(0,r.useState)(null);return(0,r.useEffect)(()=>{let e=!0;return(async()=>{let n=(await i.mockFetch(a,{baseDelay:200,variance:200})).data,r="number"==typeof n?n:(null==n?void 0:n[t])??0,l=performance.now(),c=t=>{let a=Math.min((t-l)/s,1),n=Math.floor(0+(r-0)*(1-Math.pow(1-a,4)));e&&o(n),a<1&&requestAnimationFrame(c)};requestAnimationFrame(c)})(),()=>{e=!1}},[a,t,s]),(0,n.jsxs)("div",{className:"stat-item",children:[(0,n.jsx)("span",{className:"stat-value",children:null===l?"--":i.formatNumber(l)}),(0,n.jsx)("span",{className:"stat-label",children:t})]})}function o(){let[e,t]=(0,r.useState)(null),[s,l]=(0,r.useState)(null),[o,c]=(0,r.useState)(null);return(0,r.useEffect)(()=>{let e=!0;return(async()=>{let[n,r,s]=await Promise.all([i.mockFetch("/api/chart",{baseDelay:300,variance:150}),i.mockFetch("/api/table",{baseDelay:350,variance:150}),i.mockFetch("/api/notifications",{baseDelay:250,variance:120})]);e&&(t(n.data),l(r.data),c(s.data),n.data&&Array.isArray(n.data)&&a.e("791").then(a.bind(a,330)).then(e=>{e.initAnalytics(n.data)}).catch(()=>{}))})(),()=>{e=!1}},[]),(0,n.jsxs)("section",{className:"dashboard",children:[(0,n.jsxs)("div",{className:"card card-chart",children:[(0,n.jsx)("h3",{children:"\uD83D\uDCC8 数据图表"}),(0,n.jsx)("div",{className:"chart-placeholder",children:e?(0,n.jsxs)("div",{children:["Chart: ",e.join(", ")]}):(0,n.jsx)("div",{className:"loading-spinner"})})]}),(0,n.jsxs)("div",{className:"card card-table",children:[(0,n.jsx)("h3",{children:"\uD83D\uDCCB 数据列表"}),(0,n.jsx)("div",{className:"table-placeholder",children:s?(0,n.jsx)("ul",{children:s.map(e=>(0,n.jsx)("li",{children:`${e.name} - ${e.status} - ${i.formatCurrency(e.amount)}`},e.id))}):(0,n.jsx)("div",{className:"loading-spinner"})})]}),(0,n.jsxs)("div",{className:"card card-notifications",children:[(0,n.jsx)("h3",{children:"\uD83D\uDD14 通知中心"}),(0,n.jsx)("div",{className:"notifications-placeholder",children:o?(0,n.jsx)("ul",{children:o.map((e,t)=>(0,n.jsx)("li",{children:`${e.time} - [${e.type}] ${e.title}: ${e.message}`},t))}):(0,n.jsx)("div",{className:"loading-spinner"})})]})]})}function c(){let[e,t]=(0,r.useState)({ttfb:null,fcp:null,lcp:null,fid:null,cls:null,loadTime:null});(0,r.useEffect)(()=>{let e={ttfb:null,fcp:null,lcp:null,fid:null,cls:null,loadTime:null};function a(){let[a]=performance.getEntriesByType("navigation");a&&(e.ttfb=a.responseStart-a.requestStart,e.loadTime=a.loadEventEnd-a.fetchStart,t({...e}))}let n=new PerformanceObserver(a=>{let n=a.getEntries().find(e=>"first-contentful-paint"===e.name);n&&(e.fcp=n.startTime,t({...e}))});n.observe({entryTypes:["paint"]});let r=new PerformanceObserver(a=>{let n=a.getEntries();e.lcp=n[n.length-1].startTime,t({...e})});r.observe({entryTypes:["largest-contentful-paint"]});let s=new PerformanceObserver(a=>{let n=a.getEntries();n.length>0&&(e.fid=n[0].processingStart-n[0].startTime,t({...e}))});s.observe({entryTypes:["first-input"]});let i=0,l=new PerformanceObserver(a=>{for(let e of a.getEntries())e.hadRecentInput||(i+=e.value);e.cls=i,t({...e})});return l.observe({entryTypes:["layout-shift"]}),window.addEventListener("load",()=>{setTimeout(a,0)}),()=>{n.disconnect(),r.disconnect(),s.disconnect(),l.disconnect()}},[]);let a=["ttfb","fcp","lcp","fid","cls","loadTime"];return(0,n.jsxs)("section",{className:"performance-panel",children:[(0,n.jsx)("h2",{children:"⚡ 页面性能指标"}),(0,n.jsx)("div",{className:"perf-grid",children:["TTFB","FCP","LCP","FID","CLS","总加载时间"].map((t,r)=>{let s=a[r],i=e[s],l=null===i?"计算中...":"cls"===s?i.toFixed(3):`${i.toFixed(0)} ms`;return(0,n.jsxs)("div",{className:"perf-item",children:[(0,n.jsx)("span",{className:"perf-label",children:t}),(0,n.jsx)("span",{className:"perf-value",children:l})]},String(s))})}),(0,n.jsx)("button",{className:"save-btn",onClick:()=>{let t=sessionStorage.getItem("navigationMode")||"normal",a=JSON.parse(localStorage.getItem("performanceHistory")||"[]");a.unshift({timestamp:Date.now(),mode:t,...e}),a.length>20&&a.pop(),localStorage.setItem("performanceHistory",JSON.stringify(a)),alert("✅ 性能指标已保存！返回 Site A 查看对比数据")},children:"\uD83D\uDCBE 保存到 Site A"})]})}let d=document.getElementById("root");d&&(0,s.createRoot)(d).render((0,n.jsx)(function(){return(0,r.useEffect)(()=>{let e=window.setTimeout(()=>{a.e("624").then(a.bind(a,875)).then(e=>{e.logEnvironment(),e.supportsWebGL()&&console.debug("[nc] WebGL supported; fancy format demo:",e.fancyFormat("hello world from site b"))}).catch(()=>{})},1200);return()=>window.clearTimeout(e)},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("nav",{className:"navbar",children:[(0,n.jsx)("div",{className:"nav-brand",children:"\uD83C\uDFAF Site B"}),(0,n.jsxs)("div",{className:"nav-links",children:[(0,n.jsx)("a",{href:"#dashboard",children:"Dashboard"}),(0,n.jsx)("a",{href:"#analytics",children:"Analytics"}),(0,n.jsx)("a",{href:"#settings",children:"Settings"})]}),(0,n.jsx)("a",{className:"back-btn",onClick:()=>history.back(),children:"← 返回 Site A"})]}),(0,n.jsxs)("main",{className:"main-content",children:[(0,n.jsxs)("section",{className:"hero",children:[(0,n.jsx)("h1",{children:"欢迎来到 Site B"}),(0,n.jsx)("p",{className:"hero-subtitle",children:"这是一个复杂的页面，包含多个 JS/CSS 文件和模拟的 API 请求"}),(0,n.jsxs)("div",{className:"hero-stats",children:[(0,n.jsx)(l,{label:"users",endpoint:"/api/stats",duration:1500}),(0,n.jsx)(l,{label:"orders",endpoint:"/api/stats",duration:1200}),(0,n.jsx)(l,{label:"revenue",endpoint:"/api/stats",duration:1500})]})]}),(0,n.jsx)(o,{}),(0,n.jsx)(c,{})]}),(0,n.jsx)("footer",{className:"footer",children:(0,n.jsx)("p",{children:"Site B - Prefetch 性能测试页面"})})]})},{}))}},i={};function l(e){var t=i[e];if(void 0!==t)return t.exports;var a=i[e]={exports:{}};return s[e](a,a.exports,l),a.exports}l.m=s,l.d=(e,t)=>{for(var a in t)l.o(t,a)&&!l.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},l.f={},l.e=e=>Promise.all(Object.keys(l.f).reduce((t,a)=>(l.f[a](e,t),t),[])),l.u=e=>"assets/js/async/js/"+e+".js",l.miniCssF=e=>""+e+".css",l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},l.l=function(t,a,n,r){if(e[t])return void e[t].push(a);if(void 0!==n)for(var s,i,o=document.getElementsByTagName("script"),c=0;c<o.length;c++){var d=o[c];if(d.getAttribute("src")==t||d.getAttribute("data-rspack")=="site-b:"+n){s=d;break}}s||(i=!0,(s=document.createElement("script")).timeout=120,l.nc&&s.setAttribute("nonce",l.nc),s.setAttribute("data-rspack","site-b:"+n),s.src=t),e[t]=[a];var u=function(a,n){s.onerror=s.onload=null,clearTimeout(m);var r=e[t];if(delete e[t],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach(function(e){return e(n)}),a)return a(n)},m=setTimeout(u.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=u.bind(null,s.onerror),s.onload=u.bind(null,s.onload),i&&document.head.appendChild(s)},t=[],l.O=(e,a,n,r)=>{if(a){r=r||0;for(var s=t.length;s>0&&t[s-1][2]>r;s--)t[s]=t[s-1];t[s]=[a,n,r];return}for(var i=1/0,s=0;s<t.length;s++){for(var[a,n,r]=t[s],o=!0,c=0;c<a.length;c++)(!1&r||i>=r)&&Object.keys(l.O).every(e=>l.O[e](a[c]))?a.splice(c--,1):(o=!1,r<i&&(i=r));if(o){t.splice(s--,1);var d=n();void 0!==d&&(e=d)}}return e},l.p="/",a={410:0},l.f.j=function(e,t){var n=l.o(a,e)?a[e]:void 0;if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((t,r)=>n=a[e]=[t,r]);t.push(n[2]=r);var s=l.p+l.u(e),i=Error();l.l(s,function(t){if(l.o(a,e)&&(0!==(n=a[e])&&(a[e]=void 0),n)){var r=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;i.message="Loading chunk "+e+" failed.\n("+r+": "+s+")",i.name="ChunkLoadError",i.type=r,i.request=s,n[1](i)}},"chunk-"+e,e)}},l.O.j=e=>0===a[e],n=(e,t)=>{var n,r,[s,i,o]=t,c=0;if(s.some(e=>0!==a[e])){for(n in i)l.o(i,n)&&(l.m[n]=i[n]);if(o)var d=o(l)}for(e&&e(t);c<s.length;c++)r=s[c],l.o(a,r)&&a[r]&&a[r][0](),a[r]=0;return l.O(d)},(r=self.webpackChunksite_b=self.webpackChunksite_b||[]).forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r));var o=l.O(void 0,["783"],()=>l(970));o=l.O(o)})();