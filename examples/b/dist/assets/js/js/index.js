(()=>{"use strict";var e,t,a,n,r={970(e,t,a){var n=a(70),r=a(758),s=a(576);let l={formatNumber:e=>new Intl.NumberFormat("zh-CN").format(e),formatCurrency:e=>new Intl.NumberFormat("zh-CN",{style:"currency",currency:"CNY"}).format(e),randomInt:(e,t)=>Math.floor(Math.random()*(t-e+1))+e,async randomDelay(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:150,a=e+Math.random()*t;return new Promise(e=>setTimeout(e,a))},async mockFetch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{baseDelay:a=300,variance:n=150}=t;switch(await this.randomDelay(a,n),e){case"/api/stats":return{data:{users:this.randomInt(1e4,6e4),orders:this.randomInt(1e3,8e3),revenue:this.randomInt(1e5,8e5)}};case"/api/chart":return{data:Array.from({length:12},()=>this.randomInt(100,1e3))};case"/api/table":return{data:Array.from({length:10},(e,t)=>({id:t+1,name:`条目-${t+1}`,status:["进行中","已完成","待处理"][this.randomInt(0,2)],amount:this.randomInt(1e3,2e4)}))};case"/api/notifications":return{data:Array.from({length:5},()=>({time:new Date().toLocaleTimeString("zh-CN",{hour12:!1}),type:["INFO","WARN","ERROR"][this.randomInt(0,2)],title:"系统消息",message:"这是一条模拟通知，用于性能测试。"}))};default:return{data:null}}}};function i(e){let{label:t,endpoint:a,duration:s=1200}=e,[i,c]=(0,r.useState)(null);return(0,r.useEffect)(()=>{let e=!0;return(async()=>{let n=(await l.mockFetch(a,{baseDelay:200,variance:200})).data,r="number"==typeof n?n:(null==n?void 0:n[t])??0,i=performance.now(),o=t=>{let a=Math.min((t-i)/s,1),n=Math.floor(0+(r-0)*(1-Math.pow(1-a,4)));e&&c(n),a<1&&requestAnimationFrame(o)};requestAnimationFrame(o)})(),()=>{e=!1}},[a,t,s]),(0,n.jsxs)("div",{className:"stat-item",children:[(0,n.jsx)("span",{className:"stat-value",children:null===i?"--":l.formatNumber(i)}),(0,n.jsx)("span",{className:"stat-label",children:t})]})}function c(){let[e,t]=(0,r.useState)(null),[a,s]=(0,r.useState)(null),[i,c]=(0,r.useState)(null);return(0,r.useEffect)(()=>{let e=!0;return(async()=>{let[a,n,r]=await Promise.all([l.mockFetch("/api/chart",{baseDelay:300,variance:150}),l.mockFetch("/api/table",{baseDelay:350,variance:150}),l.mockFetch("/api/notifications",{baseDelay:250,variance:120})]);e&&(t(a.data),s(n.data),c(r.data))})(),()=>{e=!1}},[]),(0,n.jsxs)("section",{className:"dashboard",children:[(0,n.jsxs)("div",{className:"card card-chart",children:[(0,n.jsx)("h3",{children:"\uD83D\uDCC8 数据图表"}),(0,n.jsx)("div",{className:"chart-placeholder",children:e?(0,n.jsxs)("div",{children:["Chart: ",e.join(", ")]}):(0,n.jsx)("div",{className:"loading-spinner"})})]}),(0,n.jsxs)("div",{className:"card card-table",children:[(0,n.jsx)("h3",{children:"\uD83D\uDCCB 数据列表"}),(0,n.jsx)("div",{className:"table-placeholder",children:a?(0,n.jsx)("ul",{children:a.map(e=>(0,n.jsx)("li",{children:`${e.name} - ${e.status} - ${l.formatCurrency(e.amount)}`},e.id))}):(0,n.jsx)("div",{className:"loading-spinner"})})]}),(0,n.jsxs)("div",{className:"card card-notifications",children:[(0,n.jsx)("h3",{children:"\uD83D\uDD14 通知中心"}),(0,n.jsx)("div",{className:"notifications-placeholder",children:i?(0,n.jsx)("ul",{children:i.map((e,t)=>(0,n.jsx)("li",{children:`${e.time} - [${e.type}] ${e.title}: ${e.message}`},t))}):(0,n.jsx)("div",{className:"loading-spinner"})})]})]})}function o(){let[e,t]=(0,r.useState)({ttfb:null,fcp:null,lcp:null,fid:null,cls:null,loadTime:null});(0,r.useEffect)(()=>{let e={ttfb:null,fcp:null,lcp:null,fid:null,cls:null,loadTime:null};function a(){let[a]=performance.getEntriesByType("navigation");a&&(e.ttfb=a.responseStart-a.requestStart,e.loadTime=a.loadEventEnd-a.fetchStart,t({...e}))}let n=new PerformanceObserver(a=>{let n=a.getEntries().find(e=>"first-contentful-paint"===e.name);n&&(e.fcp=n.startTime,t({...e}))});n.observe({entryTypes:["paint"]});let r=new PerformanceObserver(a=>{let n=a.getEntries();e.lcp=n[n.length-1].startTime,t({...e})});r.observe({entryTypes:["largest-contentful-paint"]});let s=new PerformanceObserver(a=>{let n=a.getEntries();n.length>0&&(e.fid=n[0].processingStart-n[0].startTime,t({...e}))});s.observe({entryTypes:["first-input"]});let l=0,i=new PerformanceObserver(a=>{for(let e of a.getEntries())e.hadRecentInput||(l+=e.value);e.cls=l,t({...e})});return i.observe({entryTypes:["layout-shift"]}),window.addEventListener("load",()=>{setTimeout(a,0)}),()=>{n.disconnect(),r.disconnect(),s.disconnect(),i.disconnect()}},[]);let a=["ttfb","fcp","lcp","fid","cls","loadTime"];return(0,n.jsxs)("section",{className:"performance-panel",children:[(0,n.jsx)("h2",{children:"⚡ 页面性能指标"}),(0,n.jsx)("div",{className:"perf-grid",children:["TTFB","FCP","LCP","FID","CLS","总加载时间"].map((t,r)=>{let s=a[r],l=e[s],i=null===l?"计算中...":"cls"===s?l.toFixed(3):`${l.toFixed(0)} ms`;return(0,n.jsxs)("div",{className:"perf-item",children:[(0,n.jsx)("span",{className:"perf-label",children:t}),(0,n.jsx)("span",{className:"perf-value",children:i})]},String(s))})}),(0,n.jsx)("button",{className:"save-btn",onClick:()=>{let t=sessionStorage.getItem("navigationMode")||"normal",a=JSON.parse(localStorage.getItem("performanceHistory")||"[]");a.unshift({timestamp:Date.now(),mode:t,...e}),a.length>20&&a.pop(),localStorage.setItem("performanceHistory",JSON.stringify(a)),alert("✅ 性能指标已保存！返回 Site A 查看对比数据")},children:"\uD83D\uDCBE 保存到 Site A"})]})}let d=document.getElementById("root");d&&(0,s.createRoot)(d).render((0,n.jsx)(function(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("nav",{className:"navbar",children:[(0,n.jsx)("div",{className:"nav-brand",children:"\uD83C\uDFAF Site B"}),(0,n.jsxs)("div",{className:"nav-links",children:[(0,n.jsx)("a",{href:"#dashboard",children:"Dashboard"}),(0,n.jsx)("a",{href:"#analytics",children:"Analytics"}),(0,n.jsx)("a",{href:"#settings",children:"Settings"})]}),(0,n.jsx)("a",{className:"back-btn",onClick:()=>history.back(),children:"← 返回 Site A"})]}),(0,n.jsxs)("main",{className:"main-content",children:[(0,n.jsxs)("section",{className:"hero",children:[(0,n.jsx)("h1",{children:"欢迎来到 Site B"}),(0,n.jsx)("p",{className:"hero-subtitle",children:"这是一个复杂的页面，包含多个 JS/CSS 文件和模拟的 API 请求"}),(0,n.jsxs)("div",{className:"hero-stats",children:[(0,n.jsx)(i,{label:"users",endpoint:"/api/stats",duration:1500}),(0,n.jsx)(i,{label:"orders",endpoint:"/api/stats",duration:1200}),(0,n.jsx)(i,{label:"revenue",endpoint:"/api/stats",duration:1500})]})]}),(0,n.jsx)(c,{}),(0,n.jsx)(o,{})]}),(0,n.jsx)("footer",{className:"footer",children:(0,n.jsx)("p",{children:"Site B - Prefetch 性能测试页面"})})]})},{}))}},s={};function l(e){var t=s[e];if(void 0!==t)return t.exports;var a=s[e]={exports:{}};return r[e](a,a.exports,l),a.exports}l.m=r,l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e=[],l.O=(t,a,n,r)=>{if(a){r=r||0;for(var s=e.length;s>0&&e[s-1][2]>r;s--)e[s]=e[s-1];e[s]=[a,n,r];return}for(var i=1/0,s=0;s<e.length;s++){for(var[a,n,r]=e[s],c=!0,o=0;o<a.length;o++)(!1&r||i>=r)&&Object.keys(l.O).every(e=>l.O[e](a[o]))?a.splice(o--,1):(c=!1,r<i&&(i=r));if(c){e.splice(s--,1);var d=n();void 0!==d&&(t=d)}}return t},t={410:0},l.O.j=e=>0===t[e],a=(e,a)=>{var n,r,[s,i,c]=a,o=0;if(s.some(e=>0!==t[e])){for(n in i)l.o(i,n)&&(l.m[n]=i[n]);if(c)var d=c(l)}for(e&&e(a);o<s.length;o++)r=s[o],l.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return l.O(d)},(n=self.webpackChunksite_b=self.webpackChunksite_b||[]).forEach(a.bind(null,0)),n.push=a.bind(null,n.push.bind(n));var i=l.O(void 0,["783"],()=>l(970));i=l.O(i)})();